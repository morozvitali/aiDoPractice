‚öôÔ∏è –ú–æ–¥—É–ª—å ‚Ññ4 ‚Äî Stream.iterate() / generate()

üìò –ú–µ—Ç–∞:
–Ω–∞–≤—á–∏—Ç–∏—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏, –æ–±–º–µ–∂—É–≤–∞—Ç–∏ —Ç–∞ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ –ø–æ—Ç–æ–∫–∏,
—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ iterate() —ñ generate(),
—Ç–∞ –≤–º—ñ—Ç–∏ ‚Äú–∑—É–ø–∏–Ω—è—Ç–∏‚Äù –ø–æ—Ç—ñ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (—á–µ—Ä–µ–∑ limit() –∞–±–æ takeWhile()).

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 1 ‚Äî –ü—Ä–æ—Å—Ç–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å (iterate)

üéØ –ú–µ—Ç–∞: –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –±–∞–∑–æ–≤—É –ª–æ–≥—ñ–∫—É.

Stream.iterate(0, n -> n + 2)
.limit(5)
.forEach(System.out::print); // 02468


üß† iterate(seed, next) ‚Äî –ø–æ—á–∏–Ω–∞—î –∑ 0 —ñ —â–æ—Ä–∞–∑—É –¥–æ–¥–∞—î 2.

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 2 ‚Äî –í–∏–ø–∞–¥–∫–æ–≤—ñ —á–∏—Å–ª–∞ (generate)

üéØ –ú–µ—Ç–∞: –ø–æ–±–∞—á–∏—Ç–∏, —â–æ generate() –Ω–µ –º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏.

Stream.generate(() -> (int)(Math.random() * 10))
.limit(5)
.forEach(System.out::print);


üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç: 5 –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª –≤—ñ–¥ 0 –¥–æ 9.

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 3 ‚Äî –ö–≤–∞–¥—Ä–∞—Ç —á–∏—Å–ª–∞ (iterate)

üéØ –ú–µ—Ç–∞: —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∫–≤–∞–¥—Ä–∞—Ç—ñ–≤.

Stream.iterate(1, n -> n + 1)
.map(n -> n * n)
.limit(5)
.forEach(System.out::println);
// 1 4 9 16 25

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 4 ‚Äî –£–º–æ–≤–Ω–µ iterate (Java 9+)

üéØ –ú–µ—Ç–∞: –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ñ–æ—Ä–º—É iterate –∑ —É–º–æ–≤–æ—é –∑—É–ø–∏–Ω–∫–∏.

Stream.iterate(1, n -> n <= 10, n -> n + 2)
.forEach(System.out::print); // 13579


üß† Java 9+ –¥–æ–∑–≤–æ–ª—è—î –æ–¥—Ä–∞–∑—É –≤–∫–∞–∑–∞—Ç–∏ —É–º–æ–≤—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è, –±–µ–∑ .limit().

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 5 ‚Äî Stream.generate() –∑ UUID

üéØ –ú–µ—Ç–∞: —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.

Stream.generate(UUID::randomUUID)
.limit(3)
.forEach(System.out::println);


üì§ 3 –≤–∏–ø–∞–¥–∫–æ–≤—ñ UUID ‚Äî –∑—Ä—É—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤ –∞–±–æ —Ñ—ñ–∫—Ç–∏–≤–Ω–∏—Ö ID.

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 6 ‚Äî –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –ø–æ—Ç—ñ–∫ –§—ñ–±–æ–Ω–∞—á—á—ñ

üéØ –ú–µ—Ç–∞: –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ iterate() —ñ –º–∞—Å–∏–≤ –¥–ª—è —Å—Ç–∞–Ω—É.

Stream.iterate(new int[]{0, 1}, a -> new int[]{a[1], a[0] + a[1]})
.limit(10)
.map(a -> a[0])
.forEach(System.out::print); // 01123581321


üß† –¢—É—Ç a ‚Äî –ø–∞—Ä–∞ [–ø–æ–ø–µ—Ä–µ–¥–Ω—î, –Ω–∞—Å—Ç—É–ø–Ω–µ].

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 7 ‚Äî –°–∏–º—É–ª—è—Ü—ñ—è —Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞

üéØ –ú–µ—Ç–∞: —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —ñ–∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é.

Stream.iterate(1, n -> n + 1)
.peek(n -> {
try { Thread.sleep(1000); } catch (InterruptedException e) {}
})
.limit(5)
.forEach(n -> System.out.println("Tick " + n));


üì§ –í–∏–≤—ñ–¥:

Tick 1  
Tick 2  
...

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 8 ‚Äî takeWhile + iterate

üéØ –ú–µ—Ç–∞: –ø–æ—î–¥–Ω–∞—Ç–∏ –¥–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó.

Stream.iterate(1, n -> n + 3)
.takeWhile(n -> n < 20)
.forEach(System.out::println);
// 1 4 7 10 13 16 19


üß† –ü–æ—Ç—ñ–∫ ‚Äú—Å–∞–º —Å–µ–±–µ –æ–±–º–µ–∂—É—î‚Äù —É–º–æ–≤–æ—é.

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 9 ‚Äî generate() + Random + mapToInt

üéØ –ú–µ—Ç–∞: –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 100 –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª —ñ –∑–Ω–∞–π—Ç–∏ —Å–µ—Ä–µ–¥–Ω—î.

Random random = new Random();
double avg = Stream.generate(() -> random.nextInt(100))
.limit(100)
.mapToInt(Integer::intValue)
.average()
.orElse(0);

System.out.println(avg);

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 10 ‚Äî –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–µ: iterate ‚Üí mapToObj ‚Üí filter ‚Üí collect

üéØ –ú–µ—Ç–∞: —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —á–∏—Å–µ–ª, –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ —Ç–∞ –∑—ñ–±—Ä–∞—Ç–∏.

üìã –£–º–æ–≤–∞:
–°—Ç–≤–æ—Ä–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —á–∏—Å–µ–ª –≤—ñ–¥ 1 –¥–æ 100
‚Üí –∑–∞–ª–∏—à —Ç—ñ–ª—å–∫–∏ —Ç—ñ, —â–æ –∫—Ä–∞—Ç–Ω—ñ 7
‚Üí –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏ —ó—Ö —É —Ç–µ–∫—Å—Ç ‚ÄúNum: X‚Äù
‚Üí –∑–±–µ—Ä–∏ –≤ —Å–ø–∏—Å–æ–∫.

List<String> result = IntStream.iterate(1, n -> n + 1)
.takeWhile(n -> n <= 100)
.filter(n -> n % 7 == 0)
.mapToObj(n -> "Num: " + n)
.toList();

System.out.println(result);


üì§ [Num: 7, Num: 14, ..., Num: 98]

üí° –ü—ñ–¥—Å—É–º–æ–∫
–ú–µ—Ç–æ–¥	–¢–∏–ø	–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è
Stream.iterate(seed, next)	–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π	–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
Stream.generate(supplier)	–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π	–∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞–Ω–æ–≤–æ
takeWhile() / limit()	–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ç–æ–∫—É	–±–µ–∑ –Ω–∏—Ö generate() ‚Üí –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ—Å—Ç—å
iterate(..., predicate, next)	(Java 9+)	—É–º–æ–≤–Ω–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ—è –±–µ–∑ limit()
