‚öóÔ∏è –ú–æ–¥—É–ª—å: Collector.of() ‚Äî –≥–ª–∏–±–æ–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞

üìò –ú–µ—Ç–∞:
–∑—Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤–ª–∞—Å–Ω–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤—ñ–Ω –ø—Ä–∏–π–º–∞—î,
—ñ –Ω–∞–≤—á–∏—Ç–∏—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–≤–æ—ó ‚Äú–º—ñ–Ω—ñ-Collectors‚Äù, –∫–æ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö (toList(), joining(), counting()) –≤–∂–µ –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î.

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 1 ‚Äî –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Collector.of()

üéØ –ú–µ—Ç–∞: –∑–∞—Å–≤–æ—ó—Ç–∏ —Ñ–æ—Ä–º—É 5 –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:

Collector.of(supplier, accumulator, combiner, finisher)


üìã –£–º–æ–≤–∞:
–°—Ç–≤–æ—Ä–∏ Collector, —è–∫–∏–π –∑–±–∏—Ä–∞—î –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —É StringBuilder.

List<String> list = List.of("Java", "Stream", "API");

String result = list.stream()
.collect(Collector.of(
StringBuilder::new,           // supplier
(sb, s) -> sb.append(s).append(" "), // accumulator
StringBuilder::append,        // combiner
StringBuilder::toString       // finisher
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: "Java Stream API "

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 2 ‚Äî –ö–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è —Å—É–º–∏

üéØ –ú–µ—Ç–∞: –∑–∞–º—ñ–Ω–∏—Ç–∏ .mapToInt().sum() –≤–ª–∞—Å–Ω–∏–º –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º.

üìã –£–º–æ–≤–∞:
–û–±—á–∏—Å–ª–∏ —Å—É–º—É —á–∏—Å–µ–ª —ñ–∑ —Å–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ Collector.of().

List<Integer> nums = List.of(1, 2, 3, 4);

int sum = nums.stream().collect(Collector.of(
() -> new int[1],
(a, n) -> a[0] += n,
(a1, a2) -> { a1[0] += a2[0]; return a1; },
a -> a[0]
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: 10

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 3 ‚Äî –ö–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è

üéØ –ú–µ—Ç–∞: —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è accumulator + finisher.

üìã –£–º–æ–≤–∞:
–û–±—á–∏—Å–ª–∏ —Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —á–∏—Å–µ–ª.

List<Integer> list = List.of(5, 10, 15);

double avg = list.stream().collect(Collector.of(
() -> new int[2],                     // [sum, count]
(a, n) -> { a[0] += n; a[1]++; },
(a1, a2) -> { a1[0]+=a2[0]; a1[1]+=a2[1]; return a1; },
a -> (double)a[0]/a[1]
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: 10.0

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 4 ‚Äî –ö–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –∑–ª–∏—Ç—Ç—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Å–ª—ñ–≤

üéØ –ú–µ—Ç–∞: –ø—Ä–∞–∫—Ç–∏–∫–∞ –∑ Set —ñ combiner.

üìã –£–º–æ–≤–∞:
–û–±‚Äô—î–¥–Ω–∞–π —É—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —É Set –±–µ–∑ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤.

List<String> words = List.of("a", "b", "a", "c");

Set<String> set = words.stream().collect(Collector.of(
HashSet::new,
Set::add,
(s1, s2) -> { s1.addAll(s2); return s1; }
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: [a, b, c]

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 5 ‚Äî Collector –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ

üéØ –ú–µ—Ç–∞: —É—Å–≤—ñ–¥–æ–º–∏—Ç–∏, —â–æ –ª–æ–≥—ñ–∫—É —Ñ—ñ–ª—å—Ç—Ä–∞ –º–æ–∂–Ω–∞ –≤–±—É–¥–æ–≤—É–≤–∞—Ç–∏ –ø—Ä—è–º–æ –≤ collector.

üìã –£–º–æ–≤–∞:
–ó–±–∏—Ä–∞–π –ª–∏—à–µ –ø–∞—Ä–Ω—ñ —á–∏—Å–ª–∞ —É —Å–ø–∏—Å–æ–∫.

List<Integer> nums = List.of(1, 2, 3, 4, 5);

List<Integer> evens = nums.stream().collect(Collector.of(
ArrayList::new,
(list, n) -> { if (n % 2 == 0) list.add(n); },
(l1, l2) -> { l1.addAll(l2); return l1; }
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: [2, 4]

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 6 ‚Äî Collector –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Map

üéØ –ú–µ—Ç–∞: –Ω–∞–≤—á–∏—Ç–∏—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —á–µ—Ä–µ–∑ accumulator.

üìã –£–º–æ–≤–∞:
–ó—Ä–æ–±–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –±—É–¥—É—î Map<–ø–µ—Ä—à–∞_–ª—ñ—Ç–µ—Ä–∞, –¥–æ–≤–∂–∏–Ω–∞_—Ä—è–¥–∫–∞>.

List<String> words = List.of("apple", "banana", "pear");

Map<Character, Integer> map = words.stream().collect(Collector.of(
HashMap::new,
(m, s) -> m.put(s.charAt(0), s.length()),
(m1, m2) -> { m1.putAll(m2); return m1; }
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: {a=5, b=6, p=4}

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 7 ‚Äî Collector –∑ post-processing (finisher)

üéØ –ú–µ—Ç–∞: –Ω–∞–≤—á–∏—Ç–∏—Å—è –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è –∑–±–æ—Ä—É.

üìã –£–º–æ–≤–∞:
–ó–±–∏—Ä–∞–π —É—Å—ñ —Å–ª–æ–≤–∞ —É —Å–ø–∏—Å–æ–∫, –∞ –ø–æ—Ç—ñ–º –ø–æ–≤–µ—Ä–Ω–∏ —ó—Ö —É –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ.

List<String> list = List.of("a", "b", "c");

List<String> upper = list.stream().collect(Collector.of(
ArrayList::new,
List::add,
(a, b) -> { a.addAll(b); return a; },
l -> l.stream().map(String::toUpperCase).toList()
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: [A, B, C]

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 8 ‚Äî Collector –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä—è–¥–∫–∞

üéØ –ú–µ—Ç–∞: –ø–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ joining(", ").

üìã –£–º–æ–≤–∞:
–û–±‚Äô—î–¥–Ω–∞–π —Ä—è–¥–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–º—É, –±–µ–∑ –ø—Ä–æ–±—ñ–ª—É –ø—ñ—Å–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ.

List<String> names = List.of("Mark", "Luke", "John");

String joined = names.stream().collect(Collector.of(
StringBuilder::new,
(sb, s) -> { if (sb.length() > 0) sb.append(", "); sb.append(s); },
(a, b) -> { if (a.length() > 0 && b.length() > 0) a.append(", "); a.append(b); return a; },
StringBuilder::toString
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: "Mark, Luke, John"

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 9 ‚Äî Collector —ñ–∑ –∫–æ–º–±—ñ–Ω–∞—Ç–æ—Ä–∏–∫–æ—é –¥–∞–Ω–∏—Ö

üéØ –ú–µ—Ç–∞: —Å—Ç–≤–æ—Ä–∏—Ç–∏ Collector, —è–∫–∏–π —Ä–∞—Ö—É—î —ñ —Å—É–º—É, —ñ —Å–µ—Ä–µ–¥–Ω—î –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

üìã –£–º–æ–≤–∞:
–ü–æ–≤–µ—Ä–Ω–∏ Map.of("sum", ..., "avg", ...)

List<Integer> nums = List.of(10, 20, 30);

Map<String, Double> result = nums.stream().collect(Collector.of(
() -> new double[2],
(a, n) -> { a[0] += n; a[1]++; },
(a1, a2) -> { a1[0]+=a2[0]; a1[1]+=a2[1]; return a1; },
a -> Map.of("sum", a[0], "avg", a[0]/a[1])
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: {sum=60.0, avg=20.0}

‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è 10 ‚Äî Collector –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É —Å–∏–º–≤–æ–ª—ñ–≤ —É —Ä—è–¥–∫—É

üéØ –ú–µ—Ç–∞: –ø–æ—î–¥–Ω–∞—Ç–∏ –≤—Å–µ ‚Äî mapToObj + –≤–ª–∞—Å–Ω–∏–π collector + finisher.

üìã –£–º–æ–≤–∞:
–ó—Ä–æ–±–∏ Collector, —è–∫–∏–π –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≥–æ–ª–æ—Å–Ω–∏—Ö —É —Ä—è–¥–∫—É.

String text = "banana";

long vowels = text.chars()
.mapToObj(c -> (char)c)
.collect(Collector.of(
() -> new long[1],
(a, ch) -> { if ("aeiou".indexOf(ch) >= 0) a[0]++; },
(a1, a2) -> { a1[0]+=a2[0]; return a1; },
a -> a[0]
));


üì§ –û—á—ñ–∫—É–≤–∞–Ω–µ: 3

üí° –ü–æ—Ä–∞–¥–∞ –¥–ª—è –≥–ª–∏–±—à–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è:

.of() ‚Äî —Ü–µ —Ñ–∞–∫—Ç–∏—á–Ω–æ ‚Äú—Ä—É—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è‚Äù –±—É–¥—å-—è–∫–æ–≥–æ Collector-–∞.

–ö–æ–∂–µ–Ω –∫–æ–ª–µ–∫—Ç–æ—Ä –º–∞—î 3 —Ñ–∞–∑–∏: –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è, –æ–±‚Äô—î–¥–Ω–∞–Ω–Ω—è, —Ñ—ñ–Ω—ñ—à—É–≤–∞–Ω–Ω—è.

–í–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–≤—ñ–π ‚Äúmini-joining‚Äù, ‚Äúmini-summarizing‚Äù –∞–±–æ –Ω–∞–≤—ñ—Ç—å Collector.toImmutableMap().