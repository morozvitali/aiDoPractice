üëâ –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è —Ç–µ–±–µ:
‚úèÔ∏è –ó—Ä–æ–±–∏ —Å–≤—ñ–π –º–µ—Ç–æ–¥:
–û—Ç—Ä–∏–º–∞–π List<List<Integer>> ‚Äî —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª

–ó–±–µ—Ä–∏ –≤—Å—ñ —á–∏—Å–ª–∞ –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫.
–í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–π —Ç—ñ, —â–æ > 50.
–í—ñ–¥—Å–æ—Ä—Ç—É–π –∑–∞ —Å–ø–∞–¥–∞–Ω–Ω—è–º.
–ü–æ–≤–µ—Ä–Ω–∏ —Å–ø–∏—Å–æ–∫.

üì• –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

List<List<Integer>> weeklyData = List.of(
List.of(40, 55, 60),
List.of(30, 70),
List.of(65, 10, 90)
);
üì§ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

[90, 70, 65, 60, 55]


?--?--?--?--?--?--?--?--THEORY--?--?--?--?--?--?--?--?


üìå –£ —á–æ–º—É —Å—É—Ç—å?
flatMap –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ç–∏ –ø—Ä–∞—Ü—é—î—à –∑—ñ —Å–ø–∏—Å–∫–∞–º–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å–ø–∏—Å–∫—É.
–ó–≤–∏—á–∞–π–Ω–∏–π .map() –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç ‚Üí –∞–ª–µ –∑–∞–ª–∏—à–∞—î "–≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å".

–ê flatMap ‚Äî "—Ä–æ–∑–ø–ª—é—â—É—î" –≤–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ –æ–¥–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫.

üì¶ –ü—Ä–∏–∫–ª–∞–¥:

List<List<String>> data = List.of(
List.of("java", "python"),
List.of("c++", "go"),
List.of("kotlin")
);
üß™ map:

data.stream()
.map(list -> list.stream())   // Stream<Stream<String>>
üî• flatMap:

data.stream()
.flatMap(list -> list.stream())   // Stream<String>
.collect(Collectors.toList());
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

[java, python, c++, go, kotlin]
üß™ –ó–∞–≤–¥–∞–Ω–Ω—è: flatMap
‚úÖ –ó–∞–¥–∞—á–∞ 1: –ó—ñ–±—Ä–∞—Ç–∏ –≤—Å—ñ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —Å–ª–æ–≤–∞ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó —Ä–µ—á–µ–Ω—å

List<String> sentences = List.of(
"Java is powerful",
"Streams are cool",
"Java makes sense"
);
üîç –¢—Ä–µ–±–∞:

–†–æ–∑–±–∏—Ç–∏ —Ä–µ—á–µ–Ω–Ω—è –Ω–∞ —Å–ª–æ–≤–∞
–ó—ñ–±—Ä–∞—Ç–∏ —ó—Ö —É —Å–ø–∏—Å–æ–∫
–ó—Ä–æ–±–∏—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º–∏ (distinct)
–ü—Ä–∏–≤–µ—Å—Ç–∏ –¥–æ –Ω–∏–∂–Ω—å–æ–≥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É

üì§ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
[java, is, powerful, streams, are, cool, makes, sense]

üíª –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —à–∞–±–ª–æ–Ω:
public List<String> extractWords(List<String> sentences) {
return sentences.stream()
.flatMap(sentence -> Arrays.stream(sentence.split(" ")))
.map(String::toLowerCase)
.distinct()
.collect(Collectors.toList());
}


–¢–∞–∫, –í—ñ—Ç–∞–ª—ñ—é! üòÑ –¢–∏ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥–ª–æ–≤–∏–≤ —Å—É—Ç—å:

üß† flatMap() "—Ä–æ–∑–ø–ª—é—â—É—î" –≤–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó —É —î–¥–∏–Ω–∏–π –ø–æ—Ç—ñ–∫,
—â–æ–± –º–∏ –º–æ–≥–ª–∏ –æ–ø–µ—Ä—É–≤–∞—Ç–∏ –Ω–∞–¥ —É—Å—ñ–º–∞ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Ç–∞–∫, –Ω—ñ–±–∏ –≤–æ–Ω–∏ –±—É–ª–∏ –≤ –æ–¥–Ω–æ–º—É —Å–ø–∏—Å–∫—É.

üßä –£—è–≤–∏:
–£ —Ç–µ–±–µ —î —Ç—Ä–∏ —Ç–∞—Ä—ñ–ª–∫–∏ üçΩÔ∏è:

–æ–¥–Ω–∞ –∑ —è–±–ª—É–∫–∞–º–∏ üçé
—ñ–Ω—à–∞ –∑ –±–∞–Ω–∞–Ω–∞–º–∏ üçå
—Ç—Ä–µ—Ç—è –∑ –∞–ø–µ–ª—å—Å–∏–Ω–∞–º–∏ üçä

map() ‚Äî –¥–∞—Å—Ç—å —Ç–æ–±—ñ —Ç—Ä–∏ —Å–ø–∏—Å–∫–∏ —Ñ—Ä—É–∫—Ç—ñ–≤

Stream<List<–§—Ä—É–∫—Ç–∏>>

flatMap() ‚Äî –∑–º—ñ—à–∞—î –≤—Å—ñ —Ñ—Ä—É–∫—Ç–∏ –≤ –æ–¥–Ω—É –∫—É–ø—É üßÉ

Stream<–§—Ä—É–∫—Ç–∏>

üì¶ –ê–Ω–∞–ª–æ–≥ –≤ Java:

List<List<String>> fruits = List.of(
List.of("apple", "pear"),
List.of("banana"),
List.of("orange", "lemon")
);

Stream<Stream<String>>  // –∫–æ–∂–Ω–∞ "—Ç–∞—Ä—ñ–ª–∫–∞" –æ–∫—Ä–µ–º–æ
.flatMap(...)

Stream<String>  // –≤—Å–µ –Ω–∞ –æ–¥–Ω—ñ–π "—Ç–∞—Ä—ñ–ª—Ü—ñ"
üéØ –¢–µ–ø–µ—Ä ‚Äî —Ç–≤–æ—è —á–µ—Ä–≥–∞!
–¢–∏ –≤–∂–µ –º–∞—î—à –∑–∞–≤–¥–∞–Ω–Ω—è:

–æ–±—Ä–æ–±–∏—Ç–∏ List<List<Integer>>

—á–µ—Ä–µ–∑ flatMap(), filter(), sorted() —Ç–∞ collect()

----------------------------------------------------

üîπ –ó–∞–¥–∞—á–∞ 2: –ó–Ω–∞–π—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–µ –ø–∞—Ä–Ω–µ —á–∏—Å–ª–æ
int[][] data = {
{3, 11},
{6, 7},
{10}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 6
üì¶ –†—ñ—à–µ–Ω–Ω—è:
Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.filter(n -> n % 2 == 0)
.min()
.orElse(-1);

üîπ –ó–∞–¥–∞—á–∞ 3: –î–æ–±—É—Ç–æ–∫ —É—Å—ñ—Ö –¥–æ–¥–∞—Ç–Ω–∏—Ö —á–∏—Å–µ–ª
int[][] data = {
{-3, 5},
{2},
{-1, 4}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 5 * 2 * 4 = 40
üì¶ –†—ñ—à–µ–Ω–Ω—è:
Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.filter(n -> n > 0)
.reduce(1, (a, b) -> a * b);

üîπ –ó–∞–¥–∞—á–∞ 4: –ù–∞–π–±—ñ–ª—å—à–µ —á–∏—Å–ª–æ, —è–∫–µ –¥—ñ–ª–∏—Ç—å—Å—è –Ω–∞ 3
int[][] data = {
{3, 9},
{8, 12},
{7}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 12
üì¶ –†—ñ—à–µ–Ω–Ω—è:
Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.filter(n -> n % 3 == 0)
.max()
.orElse(-1);

üîπ –ó–∞–¥–∞—á–∞ 5: –°—É–º–∞ –∫–≤–∞–¥—Ä–∞—Ç—ñ–≤ –ø–∞—Ä–Ω–∏—Ö —á–∏—Å–µ–ª
int[][] data = {
{2, 3},
{4}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 2¬≤ + 4¬≤ = 20
üì¶ –†—ñ—à–µ–Ω–Ω—è:
Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.filter(n -> n % 2 == 0)
.map(n -> n * n)
.sum();

üîπ –ó–∞–¥–∞—á–∞ 6: –°–µ—Ä–µ–¥–Ω—î –Ω–µ–ø–∞—Ä–Ω–∏—Ö —á–∏—Å–µ–ª (rounded down)
int[][] data = {
{3, 5},
{7}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 5
üì¶ –†—ñ—à–µ–Ω–Ω—è:
IntSummaryStatistics stats = Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.filter(n -> n % 2 != 0)
.summaryStatistics();

int result = stats.getCount() == 0 ? -1 : (int) stats.getAverage();

‚≠ê –ó–∞–¥–∞—á–∞ 7: –ù–°–î (–Ω–∞–π–±—ñ–ª—å—à–∏–π —Å–ø—ñ–ª—å–Ω–∏–π –¥—ñ–ª—å–Ω–∏–∫)
int[][] data = {
{12},
{24, 36}
};
üß™ –û—á—ñ–∫—É–≤–∞–Ω–æ: 12
üì¶ –†—ñ—à–µ–Ω–Ω—è:
Arrays.stream(data)
.flatMapToInt(Arrays::stream)
.reduce(Main::gcd)
.orElse(-1);

// –º–µ—Ç–æ–¥ gcd:
static int gcd(int a, int b) {
return b == 0 ? a : gcd(b, a % b);
}
üéÅ –ë–æ–Ω—É—Å: —á–æ–º—É flatMapToInt?
üîß –ë–æ flatMap(...) –ø–æ–≤–µ—Ä—Ç–∞—î Stream<Stream<T>>, –∞ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω IntStream.
–í–∞—Ä—ñ–∞–Ω—Ç–∏:

flatMapToInt(...) ‚Üí –¥–ª—è int[]
flatMap(...) ‚Üí –¥–ª—è –æ–±‚Äô—î–∫—Ç—ñ–≤ (List<List<...>>)
–°–∫–∞–∂–∏, –∫–æ–ª–∏ –≥–æ—Ç–æ–≤–∏–π –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è:
List<List<Integer>> + flatMap
Stream<List<String>> + flatMap() + distinct()
Map<String, List<String>> + entrySet().stream().flatMap(...)


---------------instanceof-objects-filtration---------------

‚úÖ –ó–∞–¥–∞—á–∞ 8: –§—ñ–ª—å—Ç—Ä —á–∏—Å–µ–ª
üìã –£–º–æ–≤–∞:
–Ñ —Å–ø–∏—Å–æ–∫ —ñ–∑ —á–∏—Å–µ–ª, —Ä—è–¥–∫—ñ–≤ —ñ –±—É–ª–µ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å. –ü–æ–≤–µ—Ä–Ω–∏ —Å–ø–∏—Å–æ–∫ —Ç—ñ–ª—å–∫–∏ –∑ —Ü—ñ–ª–∏–º–∏ —á–∏—Å–ª–∞–º–∏ (Integer).

üß† –ü—ñ–¥–∫–∞–∑–∫–∞:
x instanceof Integer

üìå –ü—Ä–∏–∫–ª–∞–¥:

List.of(10, "hello", true, 42, false, "42") ‚Üí [10, 42]
üß™ –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∫–æ–¥:

public static List<Object> filterIntegers(List<Object> input) {
return input.stream()
.filter(x -> x instanceof Integer)
.collect(Collectors.toList());
}
‚úÖ –ó–∞–¥–∞—á–∞ 9: –ó–∞–ª–∏—à–∏—Ç–∏ —Ä—è–¥–∫–∏
üìã –£–º–æ–≤–∞:
–ó–∞–ª–∏—à —É —Å–ø–∏—Å–∫—É –ª–∏—à–µ —Ç—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —è–∫—ñ —î —Ä—è–¥–∫–∞–º–∏ (String).

üìå –ü—Ä–∏–∫–ª–∞–¥:

List.of("hello", 1, 2.5, true, "world") ‚Üí ["hello", "world"]
üß† –ü—ñ–¥–∫–∞–∑–∫–∞:
x instanceof String

‚úÖ –ó–∞–¥–∞—á–∞ 10: –†–æ–∑—É–º–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä
üìã –£–º–æ–≤–∞:
–ó–∞–ª–∏—à –ª–∏—à–µ —Ç—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —è–∫—ñ —î —á–∏—Å–ª–∞–º–∏ (Integer) —ñ –±—ñ–ª—å—à—ñ –∑–∞ 10.

üìå –ü—Ä–∏–∫–ª–∞–¥:

List.of("a", 3, 15, 11, 9, "99") ‚Üí [15, 11]
üß† –ü—ñ–¥–∫–∞–∑–∫–∞:

x instanceof Integer && (Integer)x > 10
‚úÖ –ó–∞–¥–∞—á–∞ 11: –§—ñ–ª—å—Ç—Ä —ñ—Å—Ç–∏–Ω–∏
üìã –£–º–æ–≤–∞:
–ü–æ–≤–µ—Ä–Ω–∏ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —Ç–∏–ø—É Boolean, —è–∫—ñ —Ä—ñ–≤–Ω—ñ true.

üìå –ü—Ä–∏–∫–ª–∞–¥:

List.of("yes", true, false, true, 1) ‚Üí [true, true]
üß† –ü—ñ–¥–∫–∞–∑–∫–∞:

x instanceof Boolean && (Boolean)x == true
‚úÖ –ó–∞–¥–∞—á–∞ 12: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ä—è–¥–∫—ñ–≤ —É –≤–µ–ª–∏–∫—ñ –±—É–∫–≤–∏
üìã –£–º–æ–≤–∞:
–ó–∞–ª–∏—à–∏ —Ç—ñ–ª—å–∫–∏ String, –∞–ª–µ –ø–æ–≤–µ—Ä—Ç–∞–π —ó—Ö —É –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ (toUpperCase()).

üìå –ü—Ä–∏–∫–ª–∞–¥:

List.of("hi", 123, "bye", false) ‚Üí ["HI", "BYE"]
üß† –ü—ñ–¥–∫–∞–∑–∫–∞:

x instanceof String ‚Üí ((String)x).toUpperCase()