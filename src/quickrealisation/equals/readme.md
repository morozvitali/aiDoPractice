üîç –©–æ —Ç–∞–∫–µ equals() –≤ Java?
–ú–µ—Ç–æ–¥ equals() ‚Äî —Ü–µ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—É Object, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º, –∞ –Ω–µ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º.

public boolean equals(Object obj)
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (Object.equals()):
–ü–æ—Ä—ñ–≤–Ω—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è:

Object obj1 = new Object();
Object obj2 = new Object();

System.out.println(obj1.equals(obj2)); // false
System.out.println(obj1 == obj2);      // false



‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è equals():
–ó–≥—ñ–¥–Ω–æ –∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º equals(), –º–µ—Ç–æ–¥ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏:

–†–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–∏–º ‚Äî x.equals(x) ‚Üí true
–°–∏–º–µ—Ç—Ä–∏—á–Ω–∏–º ‚Äî x.equals(y) ‚áî y.equals(x)
–¢—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω–∏–º ‚Äî —è–∫—â–æ x.equals(y) —ñ y.equals(z), —Ç–æ–¥—ñ x.equals(z)
–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–º ‚Äî –±–∞–≥–∞—Ç–æ—Ä–∞–∑–æ–≤—ñ –≤–∏–∫–ª–∏–∫–∏ –¥–∞—é—Ç—å —Ç–æ–π —Å–∞–º–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —è–∫—â–æ –æ–±‚Äô—î–∫—Ç–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è
–°—É–º—ñ—Å–Ω–∏–º –∑ null ‚Äî x.equals(null) ‚Üí false (–Ω–µ –º–∞—î –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫)

üõ†Ô∏è –ö–æ–ª–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—é—Ç—å equals()?
–ö–æ–ª–∏ —Ç–∏ —Å—Ç–≤–æ—Ä—é—î—à –≤–ª–∞—Å–Ω—ñ –∫–ª–∞—Å–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, User, —ñ —Ö–æ—á–µ—à –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –∑–∞ —ó—Ö–Ω—ñ–º–∏ –ø–æ–ª—è–º–∏, –∞ –Ω–µ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º:

User u1 = new User("Vitalii", 25);
User u2 = new User("Vitalii", 25);

u1.equals(u2); // true, —è–∫—â–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ


üßë‚Äçüíª –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ equals()?
‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –∫–ª–∞—Å—É:
import java.util.Objects;

public class User {
private String name;
private int age;

public User(String name, int age) {
        this.name = name;
        this.age = age;
    }

@Override
    public boolean equals(Object o) {
        if (this == o) return true; // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
        if (o == null || getClass() != o.getClass()) return false; // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—É

User user = (User) o; // –∫–∞—Å—Ç–∏–Ω–≥

// –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ–ª—ñ–≤
        return age == user.age && Objects.equals(name, user.name);
    }

@Override
    public int hashCode() {
        return Objects.hash(name, age); // —è–∫—â–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î—à equals ‚Äî –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á hashCode()
    //–∑–∞–≤–¥–∞–Ω–Ω—è = –∑—Ä–æ–±–∏ –≤–ª–∞—Å–Ω—É —Ä–µ–∞–ª—ã–∑–∞—Ü—ã—é –º–µ—Ç–æ–¥—É hashCode()    
}
}

‚ö†Ô∏è –©–æ –±—É–¥–µ, —è–∫—â–æ –Ω–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ hashCode()?
–¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ HashMap, HashSet, HashTable, 
–±–æ –≤–æ–Ω–∏ –ø–æ–∫–ª–∞–¥–∞—é—Ç—å—Å—è –Ω–∞ hashCode() –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤.

üß™ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:

User u1 = new User("Vitalii", 25);
User u2 = new User("Vitalii", 25);

System.out.println(u1.equals(u2)); // true
System.out.println(u1 == u2);      // false
‚úçÔ∏è –ü–æ—Ä–∞–¥–∞:
–î–ª—è –∫—Ä–∞—â–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é —ñ –ø—Ä–æ—Å—Ç–æ—Ç–∏, –º–æ–∂–µ—à —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—î—é –≤ IDE:

IntelliJ IDEA ‚Üí –ø—Ä–∞–≤–∏–π –∫–ª—ñ–∫ ‚Üí Generate ‚Üí equals() and hashCode()



----------------------------HASHCODE-----------------------------
–ó–∞—Ä–∞–∑ –ø–æ–∫–∞–∂—É, —è–∫ –∑—Ä–æ–±–∏—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é hashCode(), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Å—Ç—ñ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 7, 11, 5, 3) ‚Äî —Ü–µ –¥—É–∂–µ –∫–ª–∞—Å–∏—á–Ω–∞ —Ç–µ—Ö–Ω—ñ–∫–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ö–æ—Ä–æ—à–∏—Ö —Ö–µ—à—ñ–≤. –ü–æ—ó—Ö–∞–ª–∏!

üîß –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–¥–µ—è:
–•–µ—à–∫–æ–¥ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ –ø–æ–ª—ñ–≤ –æ–±'—î–∫—Ç–∞ —Ç–∞–∫, —â–æ–±:

—Ä—ñ–≤–Ω—ñ –æ–±'—î–∫—Ç–∏ –º–∞–ª–∏ –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ö–µ—à–∫–æ–¥

—Ä—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ ‚Äî –ø–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ä—ñ–∑–Ω–∏–π

–ú–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Å—Ç—ñ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 7, 11, 31) ‚Äî —Ü–µ —Ö–∏—Ç—Ä—ñ—Å—Ç—å –¥–ª—è —Ä–æ–∑—Å—ñ—é–≤–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å —ñ –∑–º–µ–Ω—à–µ–Ω–Ω—è –∫–æ–ª—ñ–∑—ñ–π.

üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ hashCode()

@Override
public int hashCode() {
int result = 7; // –ø–æ—á–∞—Ç–∫–æ–≤–µ –ø—Ä–æ—Å—Ç–µ —á–∏—Å–ª–æ
result = 11 * result + Integer.hashCode(id);
result = 5 * result + name.hashCode();
result = 3 * result + (email != null ? email.hashCode() : 0);
return result;
}
üß™ –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥:
public class User {
private int id;
private String name;
private String email;

    public User(int id, String name, String email) {
        this.id = id;
        this.name = name;
        this.email = email;
    }

    @Override
    public boolean equals(Object o) {
        if (o == null || getClass() != o.getClass()) return false;
        User user = (User) o;
        return id == user.id &&
               name.equals(user.name) &&
               (email != null ? email.equals(user.email) : user.email == null);
    }

    @Override
    public int hashCode() {
        int result = 7;
        result = 11 * result + Integer.hashCode(id); // –ø—Ä–æ—Å—Ç–µ —á–∏—Å–ª–æ
        result = 5 * result + name.hashCode();        // —ñ–Ω—à–µ –ø—Ä–æ—Å—Ç–µ —á–∏—Å–ª–æ
        result = 3 * result + (email != null ? email.hashCode() : 0); // —â–µ –æ–¥–Ω–µ
        return result;
    }
}
üß† –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
7 ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è

11, 5, 3 ‚Äî –ø—Ä–æ—Å—Ç—ñ –º–Ω–æ–∂–Ω–∏–∫–∏ –¥–ª—è –∑–º—ñ—à—É–≤–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –ø–æ–ª—ñ–≤

Integer.hashCode(id) ‚Äî –æ–±—á–∏—Å–ª—é—î —Ö–µ—à –¥–ª—è —á–∏—Å–ª–∞
(–∞–±–æ –ø—Ä–æ—Å—Ç–æ id, –±–æ —Ü–µ int)

name.hashCode() ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π hashCode() –¥–ª—è String

email.hashCode() ‚Äî –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é null, –±–æ null.hashCode() ‚Üí
–≤–∏–∫–∏–Ω–µ NullPointerException

‚ùó –ù–∞–≤—ñ—â–æ –º–Ω–æ–∂–∏—Ç–∏ –Ω–∞ –ø—Ä–æ—Å—Ç—ñ —á–∏—Å–ª–∞?
–©–æ–± –∫–æ–∂–Ω–µ –ø–æ–ª–µ "–≤–Ω–æ—Å–∏–ª–æ —Å–≤—ñ–π –≤–∫–ª–∞–¥" —É —Ö–µ—à, —ñ —â–æ–± –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏
—Ö–µ—à-–∫–æ–ª—ñ–∑—ñ—ó (—Ä—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ –∑ –æ–¥–Ω–∞–∫–æ–≤–∏–º —Ö–µ—à–µ–º).

–¶–µ –ø—Ä–æ—Å—Ç–∏–π —ñ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑—Ä–æ–±–∏—Ç–∏ "—è–∫—ñ—Å–Ω–∏–π" —Ö–µ—à–∫–æ–¥.

‚ö†Ô∏è –Ü —â–µ:
–ó–∞–≤–∂–¥–∏ –¥–æ—Ç—Ä–∏–º—É–π—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:

–Ø–∫—â–æ a.equals(b) ‚Üí –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ a.hashCode() == b.hashCode()

–ú–æ–∂–µ–º–æ –∑—Ä–æ–±–∏—Ç–∏ –≤–µ—Ä—Å—ñ—é –∑ Objects.hash(...) –∞–±–æ record
‚Äî —è–∫—â–æ —Ö–æ—á–µ—à —â–µ –∫–æ—Ä–æ—Ç—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç.
–ù—É —à–æ, –ø–æ–¥–∏–≤–∏–º–æ—Å—å —è–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ HashSet —á–∏ HashMap,
—á–∏ –ø—ñ–¥–∫–∏–Ω—É—Ç–∏ —Ç–µ—Å—Ç—ñ–≤? üòè
